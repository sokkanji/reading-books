# 함수형 프로그래밍

함수형 프로그래밍이라는 개념은 프로그래밍 그 자체보다 앞서 등장했고 이 패러다임에서 핵심이 되는 기반은 람다 (lambda) 계산법이다.

## 정수를 제곱하기

25까지의 정수의 제곱을 출력하는 문제

자바로 작성한 코드

```
public class Squint {
    public static void man(String args[]) {
        for (int i=0; i<25; i++) {
            System.out.println(i*i);
        }
    }
}
```

리스프에서 파생한 클로저 (Clojure)는 함수형 언어로 작성한 코드

```
(print (take 25 (map (fn [x] (* x x )) (range))))
```

**클로저와 함수형 프로그래밍의 차이**

자바는 가변 변수를 사용하고 함수형 언어는 불변 변수를 사용한다.

## 불변성과 아키텍처

아키텍트가 변수의 가변성을 염려하는 이유는 경합(race) 조건, 교착상태(deadlock) 조건, 동시 업데이트 (concurrent update) 문제가 모두 가변 변수로 인해 발생하기 때문이다.

## 가변성의 분리

애플리케이션을 제대로 구조화하려면 변수를 변경하는 컴포넌트와 변경하지 않는 컴포넌트를 분리해야 한다. 현명한 아키텍트라면 가능한 많은 처리를 불변 컴포넌트로 옮겨야 한다.

## 이벤트 소싱

이벤트 소싱은 상태가 아닌 트랙잭션을 저장하는 전략이다.
고객 계좌 잔고를 관리하는 은행 애플리케이션을 예시로, 계좌 잔고를 변경하는 대신 트랜잭션 자체를 저장하면 가변 변수를 사용하지 않아도 된다. (오직 CR만 있는 거)

## 결론

- 구조적 프로그램은 제어흐름의 직접적인 전환에 부과되는 규율
- 객체 지향 프로그래밍은 제어흐름의 간접적인 전환에 부과되는 규율
- 함수형 프로그램은 변수 할당에 부과되는 규율

소프트웨어는 순차, 분기, 반복, 참조로 구성된다. 그 이상 그 이하도 아니다.
