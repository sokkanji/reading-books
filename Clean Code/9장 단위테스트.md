# 단위테스트

### TDD 법칙 3가지

1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

위 규칙을 따르면 많은 테스트 케이스를 나온다. 많은 테스트 코드는 심각한 관리 문제를 유발하기도 한다.

### 깨끗한 테스트 코드 유지하기

새 버전을 출시할 때마다 테스트 케이스를 유지하기 위한 비용이 늘어난다.

테스트 코드는 실제 코드 못지 않게 중요하다.

- 단위테스트는 유연성, 유지보수성, 재사용성을 제공하는 테스트다.

### 테스트 당 assert 하나

- 테스트 당 개념 하나

한 테스트 함수에서 여러 개념을 테스트하는 것이 문제이다.

좋은 규칙은 "개념 당 assert 문 수를 최소로 줄여라" 와 "테스트 함수 하나는 개념 하나만 테스트하라" 다.

### F.I.R.S.T

- 빠르게 (Fast)
- 독립적으로 (Independent)
- 반복 가능하게 (Repeatable) : 어느 환경에서도 반복해서 실행될 수 있어야 한다.
- 자가검증하는 (Self-validating) : 결과를 내야한다.
- 적시에 (Timely) : ex 단위 테스트

### 결론

테스트 코드는 지속적으로 관리하고 간결하게 정리해야 한다. 테스트 API를 구현해 도메인 특화 언어 (DSL)를 만들자. 그러면 테스트 코드를 짜기가 쉬워진다.
